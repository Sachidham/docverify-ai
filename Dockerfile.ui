FROM python:3.11-slim

RUN apt-get update && apt-get install -y --no-install-recommends \
    curl \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

RUN pip install --no-cache-dir \
    "streamlit>=1.40.0,<2.0.0" \
    "requests>=2.31.0"

COPY ui/ ui/
COPY start-ui.sh .
RUN chmod +x start-ui.sh

ENV PYTHONUNBUFFERED=1
ENV API_URL=http://localhost:8000

EXPOSE 8501

CMD ["./start-ui.sh"]
